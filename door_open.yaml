blueprint:
  name: Monitorar Sensor de Contato
  description: Monitora o estado de um sensor de contato e envia uma notificação para dois celulares específicos após um tempo configurável.
  domain: automation
  input:
    sensor_contato:
      name: Escolha o sensor de contato
      selector:
        entity:
          domain: binary_sensor
    tempo_espera:
      name: Tempo de espera (em minutos)
      description: Quantos minutos o sensor deve permanecer no estado configurado antes de disparar o evento.
      default: 15
      selector:
        number:
          min: 1
          max: 60
          unit_of_measurement: min

trigger:
  - platform: state
    entity_id: !input sensor_contato
    to: "on"
    for:
      minutes: !input tempo_espera

action:
  - service: notify.mobile_app_sm_s901e
    data:
      title: "Alerta: Sensor de Contato"
      message: >
        O sensor de contato {{ states(trigger.entity_id).attributes.friendly_name if trigger.entity_id else 'Desconhecido' }}
        permaneceu aberto por {{ !input tempo_espera }} minutos.
  - service: notify.mobile_app_iphone_de_jacqueline
    data:
      title: "Alerta: Sensor de Contato"
      message: >
        O sensor de contato {{ states(trigger.entity_id).attributes.friendly_name if trigger.entity_id else 'Desconhecido' }}
        permaneceu aberto por {{ !input tempo_espera }} minutos.

mode: single
